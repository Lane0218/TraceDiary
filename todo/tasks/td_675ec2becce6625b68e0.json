{
  "task_uid": "td_675ec2becce6625b68e0",
  "display_id": "TD-SYNC-016",
  "id_prefix": "SYNC",
  "module_key": "6.5",
  "module_name": "同步与冲突解决",
  "module_label": "6.5 同步与冲突解决",
  "order": 40,
  "status": "DONE",
  "title": "修复自动解锁后缺少数据加密密钥导致手动上传异常，并增强同步状态可观测性",
  "acceptance": "自动解锁后可直接手动上传；并发触发“请稍候重试”不会在非上传中状态残留；状态区可区分是否存在未提交改动",
  "related_files": [
    "src/hooks/use-auth.ts",
    "src/services/crypto.ts",
    "src/hooks/use-sync.ts",
    "src/pages/workspace.tsx",
    "src/pages/yearly-summary.tsx",
    "src/hooks/__tests__/use-auth.test.tsx"
  ],
  "test_record": "`npm run test:unit` 通过（43/43）；`npm run test:integration` 通过（39/39）；`npm run test:e2e` 通过（17/17）；`npx playwright test e2e/specs/manual-sync-success.spec.ts e2e/specs/manual-sync-busy-clear.spec.ts e2e/specs/daily-edit.spec.ts --project=chromium --repeat-each=3 --retries=0` 通过（9/9）；`npm run build` 通过；`npm run lint` 失败（仓库既有问题：`e2e/helpers/conflict.ts:247 no-unsafe-finally`）",
  "done_record": "2026-02-10 / 4578a86",
  "source": {
    "file": "TODO.md",
    "line": 79
  },
  "version": 1,
  "updated_at": "2026-02-21T14:31:06.652Z"
}
