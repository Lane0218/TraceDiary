{
  "task_uid": "td_04aea2b157da4850f26b",
  "display_id": "TD-AUTH-002",
  "id_prefix": "AUTH",
  "module_key": "6.13",
  "module_name": "游客模式与账号体系（v1.2）",
  "module_label": "6.13 游客模式与账号体系（v1.2）",
  "order": 174,
  "status": "DONE",
  "title": "实现邮箱 OTP 登录/注册一体化入口",
  "acceptance": "用户输入邮箱后可接收验证码并登录；未注册邮箱可按配置自动注册；登录失败有可读错误反馈",
  "related_files": [
    "src/App.tsx",
    "src/components/auth/entry-auth-modal.tsx",
    "src/components/common/app-header.tsx",
    "src/pages/diary.tsx",
    "src/pages/yearly-summary.tsx",
    "src/pages/insights.tsx",
    "src/pages/settings.tsx",
    "src/services/supabase.ts",
    "src/__tests__/integration/app.integration.test.tsx"
  ],
  "test_record": "风险分级：高；`npm run lint` 通过；`npm run test:unit` 通过（92/92）；`npm run test:integration` 通过（71/71，含既有 `act(...)` 警告）；`npm run test:e2e:full` 通过（29 项执行，28 passed + 1 flaky 经 retry 通过）",
  "done_record": "2026-02-19 / 41c3864",
  "source": {
    "file": "TODO.md",
    "line": 253
  },
  "version": 1,
  "updated_at": "2026-02-21T14:31:06.652Z"
}
