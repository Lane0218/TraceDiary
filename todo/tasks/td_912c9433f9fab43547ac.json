{
  "task_uid": "td_912c9433f9fab43547ac",
  "display_id": "TD-SYNC-030",
  "id_prefix": "SYNC",
  "module_key": "6.5",
  "module_name": "同步与冲突解决",
  "module_label": "6.5 同步与冲突解决",
  "order": 54,
  "status": "DONE",
  "title": "将“云端待同步/已同步”判定收敛为时间戳方案（本地修改时间 vs 最后同步时间）",
  "acceptance": "push 成功后基于 `lastSyncedAt` 与本地 `modifiedAt` 判定“已同步/待同步”；刷新后状态保持一致；相关单元/集成/E2E 回归通过",
  "related_files": [
    "src/hooks/use-sync.ts",
    "src/pages/workspace.tsx",
    "src/pages/yearly-summary.tsx",
    "src/hooks/__tests__/use-sync.test.ts",
    "e2e/fixtures/app.ts",
    "TODO.md"
  ],
  "test_record": "`npm run lint` 通过；`npm run test:unit` 通过（58/58）；`npm run test:integration` 通过（54/54）；`npm run test:e2e:full` 首轮失败（11 failed，根因为 fixture 仅匹配 `.ProseMirror` 与默认源码模式不兼容）；修复 `e2e/fixtures/app.ts` 后执行 `npx playwright test e2e/specs/manual-sync-success.spec.ts e2e/specs/manual-sync-state-consistency.spec.ts e2e/specs/manual-sync-busy-clear.spec.ts --project=chromium --retries=0 --workers=1` 通过（3/3）；`npx playwright test e2e/specs/conflict-resolution.spec.ts e2e/specs/manual-sync-failure.spec.ts e2e/specs/manual-sync-hang-guard.spec.ts e2e/specs/remote-pull-sync.spec.ts e2e/specs/upload-encryption.spec.ts --project=chromium --retries=0 --workers=1` 通过（8/8）；重跑 `npm run test:e2e:full` 通过（21/21）",
  "done_record": "2026-02-13 / 4735ee9",
  "source": {
    "file": "TODO.md",
    "line": 93
  },
  "version": 1,
  "updated_at": "2026-02-21T14:31:06.652Z"
}
