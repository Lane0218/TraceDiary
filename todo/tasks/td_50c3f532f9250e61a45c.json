{
  "task_uid": "td_50c3f532f9250e61a45c",
  "display_id": "TD-SYNC-021",
  "id_prefix": "SYNC",
  "module_key": "6.5",
  "module_name": "同步与冲突解决",
  "module_label": "6.5 同步与冲突解决",
  "order": 45,
  "status": "DONE",
  "title": "清理跨层重复实现（同步状态/手动上传文案、认证表单结构、crypto/sync 基础工具）并收敛公共模块",
  "acceptance": "`workspace/yearly-summary` 共享同步状态与手动上传文案逻辑；`welcome/auth-modal` 共享认证表单配置；`sync.ts` 不再重复实现可复用的 crypto 基础工具；单元/集成/E2E 全部通过",
  "related_files": [
    "src/pages/workspace.tsx",
    "src/pages/yearly-summary.tsx",
    "src/components/common/status-hint.tsx",
    "src/utils/sync-availability.ts",
    "src/utils/sync-presentation.ts",
    "src/pages/welcome.tsx",
    "src/components/auth/auth-modal.tsx",
    "src/components/auth/auth-form-model.ts",
    "src/components/auth/auth-form-shared.tsx",
    "src/services/sync.ts",
    "src/services/crypto.ts",
    "src/services/__tests__/sync.test.ts",
    "TODO.md"
  ],
  "test_record": "`npm run test:unit` 通过（48/48）；`npm run test:integration` 通过（43/43）；`npm run test:e2e` 通过（20/20）；`npm run lint` 失败（仓库既有问题：`e2e/helpers/conflict.ts:247 no-unsafe-finally`）；`npm run build` 通过",
  "done_record": "2026-02-10 / da84ae1",
  "source": {
    "file": "TODO.md",
    "line": 84
  },
  "version": 1,
  "updated_at": "2026-02-21T14:31:06.652Z"
}
