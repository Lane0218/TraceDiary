{
  "task_uid": "td_e01f57f70da75ebcd3d9",
  "display_id": "TD-UI-077",
  "id_prefix": "UI",
  "module_key": "6.8",
  "module_name": "UI 体验优化",
  "module_label": "6.8 UI 体验优化",
  "order": 155,
  "status": "DONE",
  "title": "修复日记内容清空后仍被判定为“有内容”并在日历继续打点的问题",
  "acceptance": "当某日内容清空（含仅空白字符）后，该日期不应被视为“有内容”，月历不再显示记录点",
  "related_files": [
    "src/pages/diary.tsx",
    "e2e/specs/calendar-history.spec.ts",
    "TODO.md"
  ],
  "test_record": "风险分级：中；`npm run lint` 通过；`npm run test:unit` 通过（92/92）；`npm run test:integration` 通过（71/71，含既有 `act(...)` 警告）；`npx playwright test e2e/specs/calendar-history.spec.ts --project=chromium --retries=0` 首次失败（缺少 `.env.e2e`），补齐后重跑因 `4173` 端口被旧 worktree 占用导致访问 `404`，释放端口后再次重跑通过（2/2）；未执行全量 `npm run test:e2e:full`（本任务未命中全量门禁）",
  "done_record": "2026-02-19 / e0467f6",
  "source": {
    "file": "TODO.md",
    "line": 209
  },
  "version": 1,
  "updated_at": "2026-02-21T14:31:06.652Z"
}
