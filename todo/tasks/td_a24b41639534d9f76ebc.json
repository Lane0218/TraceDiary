{
  "task_uid": "td_a24b41639534d9f76ebc",
  "display_id": "TD-SYNC-025",
  "id_prefix": "SYNC",
  "module_key": "6.5",
  "module_name": "同步与冲突解决",
  "module_label": "6.5 同步与冲突解决",
  "order": 49,
  "status": "DONE",
  "title": "移除 fallback 密钥逻辑并强制仅使用主密码派生密钥进行加解密",
  "acceptance": "代码中不再保留 fallback 密钥参数、状态与解密分支；上传与下载仅使用主密码派生数据密钥；相关单元/集成/E2E 回归通过",
  "related_files": [
    "src/hooks/use-auth.ts",
    "src/services/sync.ts",
    "src/pages/workspace.tsx",
    "src/pages/yearly-summary.tsx",
    "src/hooks/__tests__/use-auth.test.tsx",
    "src/services/__tests__/sync.test.ts",
    "e2e/specs/upload-encryption.spec.ts",
    "e2e/specs/conflict-resolution.spec.ts",
    "TODO.md"
  ],
  "test_record": "用户明确授权“可不跑全量 E2E”；已执行：`npm run lint`（通过）、`npm run test:unit`（51/51 通过）、`npm run test:integration`（47/47 通过）、`npx playwright test e2e/specs/remote-pull-sync.spec.ts e2e/specs/upload-encryption.spec.ts --project=chromium --retries=0`（2/2 通过）；未执行全量 `npm run test:e2e`（按授权仅执行最相关用例）",
  "done_record": "2026-02-11 / 38f812d",
  "source": {
    "file": "TODO.md",
    "line": 88
  },
  "version": 1,
  "updated_at": "2026-02-21T14:31:06.652Z"
}
