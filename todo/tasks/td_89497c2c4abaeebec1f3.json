{
  "task_uid": "td_89497c2c4abaeebec1f3",
  "display_id": "TD-SYNC-028",
  "id_prefix": "SYNC",
  "module_key": "6.5",
  "module_name": "同步与冲突解决",
  "module_label": "6.5 同步与冲突解决",
  "order": 52,
  "status": "DONE",
  "title": "修复手动 Push 后状态不收敛并拆分 Pull/Push 按钮（Push 取消预检读取，冲突统一走弹窗处理）",
  "acceptance": "Push 成功后状态可收敛为“云端已同步”；编辑页支持独立 Pull/Push；Push 不再先读取远端内容；Pull/Push 冲突均可进入冲突弹窗",
  "related_files": [
    "src/services/sync.ts",
    "src/hooks/use-sync.ts",
    "src/pages/workspace.tsx",
    "src/pages/yearly-summary.tsx",
    "src/utils/sync-presentation.ts",
    "src/utils/sync-dirty.ts",
    "src/services/__tests__/sync.test.ts",
    "src/hooks/__tests__/use-sync.test.ts",
    "src/__tests__/integration/editor.integration.test.tsx",
    "e2e/specs/manual-sync-*.spec.ts",
    "SPEC.md",
    "TODO.md"
  ],
  "test_record": "`npm run lint` 通过；`npm run test:unit` 通过（54/54）；`npm run test:integration` 通过（43/43）；`npx playwright test e2e/specs/manual-sync-success.spec.ts --project=chromium --retries=0 --workers=1` 通过（1/1）；`npx playwright test e2e/specs/manual-sync-state-consistency.spec.ts e2e/specs/yearly-summary.spec.ts --project=chromium --retries=0 --workers=1` 通过（3/3）；`npx playwright test e2e/specs/conflict-resolution.spec.ts --project=chromium --workers=1 --retries=1 --grep \\\"保留本地版本\\\"` 通过（1/1）",
  "done_record": "2026-02-11 / e01a8ce",
  "source": {
    "file": "TODO.md",
    "line": 91
  },
  "version": 1,
  "updated_at": "2026-02-21T14:31:06.652Z"
}
