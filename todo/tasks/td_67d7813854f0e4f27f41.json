{
  "task_uid": "td_67d7813854f0e4f27f41",
  "display_id": "TD-SYNC-024",
  "id_prefix": "SYNC",
  "module_key": "6.5",
  "module_name": "同步与冲突解决",
  "module_label": "6.5 同步与冲突解决",
  "order": 48,
  "status": "DONE",
  "title": "将数据密钥改为仅由主密码导出并补齐“内容可解密可读”的端到端校验",
  "acceptance": "数据加密主密钥不再依赖 `kdfParams` 随机盐；仅凭主密码可导出同一数据密钥；相关 E2E 必须断言拉取后内容可读且非空",
  "related_files": [
    "src/services/crypto.ts",
    "src/hooks/use-auth.ts",
    "src/services/sync.ts",
    "src/pages/workspace.tsx",
    "src/pages/yearly-summary.tsx",
    "src/components/editor/markdown-editor.tsx",
    "src/hooks/use-diary.ts",
    "src/services/__tests__/crypto.test.ts",
    "src/services/__tests__/sync.test.ts",
    "src/hooks/__tests__/use-auth.test.tsx",
    "src/hooks/__tests__/use-diary.test.ts",
    "e2e/specs/remote-pull-sync.spec.ts",
    "TODO.md"
  ],
  "test_record": "用户明确授权采用必要测试策略；已执行：`npm run lint`（通过）、`npm run test:unit`（53/53 通过）、`npm run test:integration`（47/47 通过）、`npx playwright test e2e/specs/remote-pull-sync.spec.ts --project=chromium --retries=0`（1/1 通过）；未执行全量 `npm run test:e2e`（已按授权仅执行与改动直接相关用例）",
  "done_record": "2026-02-11 / 1965ec9",
  "source": {
    "file": "TODO.md",
    "line": 87
  },
  "version": 1,
  "updated_at": "2026-02-21T14:31:06.652Z"
}
