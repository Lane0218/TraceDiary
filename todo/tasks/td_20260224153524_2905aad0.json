{
  "task_uid": "td_20260224153524_2905aad0",
  "display_id": "TD-IMP-20260224-153524-2905",
  "id_prefix": "IMP",
  "module_key": "6.2",
  "module_name": "日记编辑",
  "module_label": "6.2 日记编辑",
  "order": 20260224153524,
  "status": "DONE",
  "title": "实现日记搜索核心匹配与命中片段生成工具",
  "acceptance": "提供仅 daily、本地缓存、字面量子串匹配的纯函数搜索能力，返回按日期倒序结果与首个命中片段，支持 limit=200 截断",
  "related_files": [
    "src/utils/diary-search.ts",
    "src/types/diary.ts",
    "src/__tests__/unit/diary-search.unit.test.ts",
    "SPEC.md",
    "todo/tasks/td_20260224153524_2905aad0.json"
  ],
  "test_record": "风险分级：中（单模块逻辑变更）。已执行：npm run lint（通过）；npm run test:unit（通过，新增 diary-search 单测）；npm run test:integration（初次失败，因 worktree 缺少 .env.local 导致 reset-password 用例不满足环境，复制主工作区 .env.local/.env.e2e 后重跑通过）；npm run test:e2e:changed（通过）。未执行全量 E2E（仅定向 changed）。",
  "done_record": "2026-02-25 / pending",
  "source": {
    "file": "SPEC.md",
    "line": 438
  },
  "version": 2,
  "updated_at": "2026-02-25T04:37:19.000Z"
}
