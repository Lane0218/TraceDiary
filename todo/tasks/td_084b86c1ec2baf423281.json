{
  "task_uid": "td_084b86c1ec2baf423281",
  "display_id": "TD-SEC-007",
  "id_prefix": "SEC",
  "module_key": "6.2",
  "module_name": "认证、安全与密钥管理",
  "module_label": "6.2 认证、安全与密钥管理",
  "order": 12,
  "status": "DONE",
  "title": "实现 Token 解密失败/失效回退输入流程并优化阻断弹窗体验",
  "acceptance": "Token 失效时可补输并覆盖本地密文；`needs-token-refresh` 弹窗可理解、可关闭，且视觉风格与现有主弹窗一致",
  "related_files": [
    "src/components/auth/auth-modal.tsx",
    "src/components/auth/auth-panel.tsx",
    "src/pages/diary.tsx",
    "src/pages/yearly-summary.tsx",
    "src/pages/insights.tsx",
    "src/__tests__/integration/app.integration.test.tsx"
  ],
  "test_record": "风险分级：中（认证流程弹窗策略 + UI 样式 + 跨页面入口逻辑）。已执行：`npm run lint`（通过）；`npm run test:unit`（95/95 通过）；`npm run test:integration`（87/87 通过，存在既有 act warning 但不影响通过）；`npx playwright test e2e/specs/auth-setup.spec.ts e2e/specs/auth-session.spec.ts --project=chromium --workers=2 --retries=0 --reporter=line --trace=off`（5/5 通过）。",
  "done_record": "2026-02-23 / pending",
  "source": {
    "file": "TODO.md",
    "line": 36
  },
  "version": 3,
  "updated_at": "2026-02-23T08:32:10.000Z"
}
